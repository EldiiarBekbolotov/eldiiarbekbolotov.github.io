<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FLRPR7R7LT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-FLRPR7R7LT');
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png>
    <link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png>
    <link rel="manifest" href="site.webmanifest" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="description"
        content="Eldiiar Bekbolotov is an entrepreneur, software engineer, and high school student, currently based in Ottawa." />
    <meta property="og:image" content="apple-touch-icon.png" />
    <meta property="og:description"
        content="Eldiiar Bekbolotov is an entrepreneur, software engineer, and high school student, currently based in Ottawa." />
    <meta property="og:title" content="Eldiiar Bekbolotov" />
    <title>EldiiarGPT</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto+Serif:ital,opsz,wght@0,8..144,100..900;1,8..144,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="css/main.css">
    <!-- Include a lightweight markdown renderer -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            --primary2: var(--primary);
            --primary-color2: var(--primary-color);
            --primary-hover2: var(--primary-hover);

            --primary2: #1B8AFC;
            --primary-color2: #000000bc;
            --primary-hover2: #62a9ef;
        }

        html,
        body {
            background: #000000;
            color: #FFF;
            height: 100%;
            font-family: var(--small-font);
        }

        a {
            color: var(--primary-hover2);
        }

        a:hover {
            color: var(--primary2);
        }

        #chat-messages::-webkit-scrollbar {
            width: 8px;
        }

        #chat-messages::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }

        #chat-messages::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: #888;
        }

        #chat-messages {
            scrollbar-width: thin;
            scrollbar-color: #555 #1a1a1a;
        }

        .chat-container {
            background: transparent;

            max-width: 760px;
            display: flex;
            width: 80vw;
            height: calc(100% - 80px);
            flex-direction: column;
            overflow: hidden;
        }

        #chat-messages {
            flex: 1;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            overflow-y: auto;
        }

        .message {
            padding: 10px 15px;
            border-radius: 15px;
            font-family: var(--small-font);
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            font-weight: 400;
            max-width: 80%;
            word-wrap: break-word;
            overflow-wrap: anywhere;
        }

        .message.assistant {

            max-width: 100%;
        }

        .message pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            overflow-wrap: anywhere;
            max-width: 100%;
            background: rgba(255, 255, 255, 0.08);
            padding: 8px 12px;
            border-radius: 10px;
            font-family: 'Roboto Mono', monospace;
            font-size: 14px;
        }

        .message p {
            font-size: inherit;
            font-weight: 400;
        }

        li {
            font-size: inherit;
            color: inherit;
        }

        .user {
            align-self: flex-end;
            background: var(--primary2);
            border-radius: 24px 4px 24px 24px;
            padding: 12px;
        }

        .user p {
            color: var(--primary-color2) !important;

            padding: 0px;
            margin: 0;
        }

        .assistant {
            align-self: flex-start;
            background: transparent;

            border-radius: 24px 24px 24px 4px;
            padding: 0 12px;
        }

        .input-container {
            width: 100%;
            display: flex;
        }



        #chat-input {
            flex: 1;
            padding: 10px;
            padding-left: 30px;
            border: none;
            outline: none;
            background: #222;
            color: white;
            font-size: 16px;
            font-family: var(--small-font);
            border-radius: 100px 0px 0px 100px;
        }

        #send-btn {
            padding: 0px 20px;
            border: none;
            border-radius: 0px 100px 100px 0px;
            background: #0b84ff;
            color: white;
            font-family: var(--small-font);
            font-weight: 400;
            cursor: pointer;
            height: 72px;
            transition: background 0.2s, opacity 0.2s;
        }

        #send-btn:hover {
            background: #006fce;
        }

        /* Disabled state styling */
        #send-btn:disabled {
            background: #555;
            color: rgba(255, 255, 255, 0.5);
            cursor: not-allowed;
            opacity: 1;
        }

        #send-btn:disabled svg {
            fill: rgba(255, 255, 255, 0.5);
        }


        #prompt-buttons {
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        .prompt-btn {
            background: var(--primary2);
            border: none;
            padding: 12px 16px;
            margin: 0 5px;
            color: var(--primary-color2);
            border-radius: 100px;
            font-weight: 500;
            font-family: var(--small-font);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .prompt-btn:hover {
            background: var(--primary-hover2);
        }

        .prompt-btn:active {

            transform: scale(0.97);
        }

        .prompt-btn:focus {
            outline: 2px solid rgba(255, 255, 255, 0.2) !important;
        }

        .typing {
            font-style: italic;
            opacity: 0.7;
        }

        #back {
            position: fixed;
            left: 2px;
            top: 2px;
            height: 72px;
            width: 72px;
            line-height: 72px;
            transform: scale(0.7);
            display: flex;
            text-align: center;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            border-radius: 100px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            max-width: 1000px;
            margin: 0 auto;
            mix-blend-mode: difference;
        }

        @media only screen and (max-width: 480px) {}

        @media only screen and (max-width: 600px) {
            #chat-input {

                border-radius: 0px 0px 0px 0px;
            }

            #send-btn {
                border-radius: 0px 0px 0px 0px;
            }
        }

        @media only screen and (min-width: 481px) and (max-width: 1024px) {


            .chat-container {
                width: 90vw;
            }
        }

        @media only screen and (min-width: 1000px) {


            .chat-container {
                width: 80vw;
            }
        }

        @keyframes swipd {
            0% {
                opacity: 1;
            }

            50% {
                opacity: 1;
                transform: translate(0, -10px);
            }

            100% {
                opacity: 0;
                display: none;
                transform: scale(0)translate(0, -10px);
            }
        }

        #social-links {
            border-top-left-radius: 0px;
            border-top-right-radius: 0px;
            border-bottom-left-radius: 10px;

            border-bottom-right-radius: 10px;
        }
    </style>
</head>

<body>

    <div id="social-links" style="top:0;">
        <div id="back">
            <a href="\index.html" class="social-link" style="font-size: 16px;margin:0;">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                    fill="#FFFFFF" style="margin:0;padding:0;margin-left:-4px;margin-top:-4px;">
                    <path
                        d="m382-480 294 294q15 15 14.5 35T675-116q-15 15-35 15t-35-15L297-423q-12-12-18-27t-6-30q0-15 6-30t18-27l308-308q15-15 35.5-14.5T676-844q15 15 15 35t-15 35L382-480Z" />
                </svg>
            </a>
        </div>
        <img src="src/eldiiargptpng.png" style="border-radius:50%;width:40px;height:40px;margin-right:15px;">
        <h1 style="font-size:16px;font-family:var(--small-font);font-weight:300;" class="no-select">EldiiarGPT</h1>
    </div>
    <div id=""
        style="
  position:fixed;bottom:0;left:0;right:0;z-index:1000;display:flex;justify-content:center;background:transparent;padding:0;">

        <div class="input-container" style="max-width: 1000px;margin:0 auto;">
            <input id="chat-input" placeholder="Message" autocomplete="off" />
            <button id="send-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                    width="24px" fill="#FFFFFF">
                    <path
                        d="M792-443 176-183q-20 8-38-3.5T120-220v-520q0-22 18-33.5t38-3.5l616 260q25 11 25 37t-25 37ZM200-280l474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z" />
                </svg></button>
        </div>
    </div>
    <div style="justify-content:center;display:flex;height:100%;">
        <div class="chat-container">
            <div id="chat-messages" style="padding-top:100px;">

            </div>

            <div id="prompt-buttons">
                <button class="prompt-btn" data-msg="Who is Eldiiar?">Who is Eldiiar?</button>
                <button class="prompt-btn" data-msg="What are some of Eldiiar's projects?">Eldiiar's projects</button>
                <button class="prompt-btn" data-msg="How can I connect with Eldiiar?">Connect</button>
            </div>


        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');
        const promptButtons = document.querySelectorAll('.prompt-btn');
        const STORAGE_KEY = 'eldiiarGPTChat';

        let messages = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

        function renderMessages() {
            chatMessages.innerHTML = '';
            messages.forEach(msg => {
                const div = document.createElement('div');
                div.classList.add('message', msg.role);
                div.innerHTML = marked.parse(msg.content);
                chatMessages.appendChild(div);
            });
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function sendMessage(content, type = 'ai') {
            if (!content.trim()) return;

            messages.push({ role: 'user', content });
            trimMessages();
            renderMessages();
            chatInput.value = '';

            const typingDiv = document.createElement('div');
            typingDiv.classList.add('message', 'assistant', 'typing');
            typingDiv.textContent = 'EldiiarGPT is typing...';
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            if (type === 'ai') {
                try {
                    const res = await fetch('https://eldiiar.netlify.app/.netlify/functions/chatWithGroq', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ messages })
                    });
                    const data = await res.json();
                    const botReply = data.reply || 'No response';


                    typingDiv.remove();

                    messages.push({ role: 'assistant', content: botReply });
                    trimMessages();
                    renderMessages();
                    saveMessages();
                } catch (err) {
                    console.error(err);
                    typingDiv.remove();
                    messages.push({ role: 'assistant', content: 'Error: Could not reach AI' });
                    trimMessages();
                    renderMessages();
                    saveMessages();
                }
            }
            else if (type === 'who') {
                typingDiv.remove();
                messages.push({ role: 'assistant', content: "Eldiiar Bekbolotov is a high school developer focusing on software engineering and UI/UX design. He is really passionate about STEM, business, finance, and design. He strives to work on meaningful projects that solve issues and positively impact underserved people in a variety of fields using the power of creative innovation. Eldiiar actively develops and maintains solutions that improve the lives of thousands worldwide." });
                trimMessages();
                renderMessages();
                saveMessages();
            } else if (type === 'projects') {
                typingDiv.remove();
                messages.push({ role: 'assistant', content: 'You can see his programming projects here: https://eldiiarcodes.web.app/' });
                trimMessages();
                renderMessages();
                saveMessages();
            } else if (type === 'connect') {
                typingDiv.remove();
                messages.push({ role: 'assistant', content: '<h3>Connect with Eldiiar Bekbolotov via LinkedIn:</h3><br/> https://linkedin.com/in/eldiiar<br/><br/>' });
                trimMessages();
                renderMessages();
                saveMessages();
            } else {
                typingDiv.remove();
                messages.push({ role: 'assistant', content: "Listen, I'm still being trained, so I don't know the answer to your question... Why don't you try asking Eldiiar himself?<br/><br/> https://linkedin.com/in/eldiiar" });
                trimMessages();
                renderMessages();
                saveMessages();
            }
        }

        function trimMessages() {
            if (messages.length > 25) messages = messages.slice(-25);
        }

        function saveMessages() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));
        }

        // Event listeners
        sendBtn.addEventListener('click', () => sendMessage(chatInput.value));

        chatInput.addEventListener('input', () => {
            sendBtn.disabled = !chatInput.value.trim(); // disable if input is empty or whitespace
        });

        chatInput.addEventListener('keypress', e => {
            if (e.key === 'Enter') sendMessage(chatInput.value);
        });

        sendBtn.disabled = !chatInput.value.trim();


        // Prompt buttons
        promptButtons.forEach(btn => {
            btn.addEventListener('click', function () {
                if (btn.dataset.msg === 'Who is Eldiiar?') {
                    sendMessage(btn.dataset.msg, 'who');
                } else if (btn.dataset.msg === "What are some of Eldiiar's projects?") {
                    sendMessage(btn.dataset.msg, 'projects');
                } else if (btn.dataset.msg === "How can I connect with Eldiiar?") {
                    sendMessage(btn.dataset.msg, 'connect');
                } else {
                    sendMessage(btn.dataset.msg);
                }

                btn.style.animation = '0.5s forwards swipd';
            });
        });

        renderMessages();
    </script>
</body>

</html>